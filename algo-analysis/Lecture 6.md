Анализ алгоритмов, лекция 6
===========================



Чётность можно посчитать за O(n) по таблице инверсий. А можно ли по этой таблице
узнать чётность обратной перестановки?

`f = <2 7 3 6 5 1 4>` - перестановка

`X = /5 0 1 3 2 1 0/` - её таблица инверсий

`inv(f) = <6 1 3 7 5 4 2>` - обратная

`y = /1 5 1 3 2 0 0/` таблица инверсий



Запишем табличку

+---+---+---+---+---+---+---+-------------------------------+
| 1 | 1 | 1 | 1 | 1 | * |   | 5 единичек, а потом звёздочка |
+---+---+---+---+---+---+---+-------------------------------+
| * |   |   |   |   |   |   | 0 единичек, потом звёздочка   |
+---+---+---+---+---+---+---+-------------------------------+
|   | 1 | * |   |   |   |   | 1 единичка, потом звёздочка   |
+---+---+---+---+---+---+---+-------------------------------+
|   | 1 |   | 1 | 1 |   | * | 3 единички и звёздочка        |
+---+---+---+---+---+---+---+-------------------------------+
|   | 1 |   | 1 | * |   |   | 2 единички                    |
+---+---+---+---+---+---+---+-------------------------------+
|   | 1 |   | * |   |   |   | одна                          |
+---+---+---+---+---+---+---+-------------------------------+
|   | * |   |   |   |   |   | ни одной                      |
+---+---+---+---+---+---+---+-------------------------------+
| 1 | 5 | 1 | 2 | 2 | 0 | 0 | количество единичек           |
+---+---+---+---+---+---+---+-------------------------------+

Сравните `X`, `Y` и последнюю колонку и столбец.



### Представление перестановок в виде бинарных деревьев

-- Мне было лень рисовать дерево, поэтому ищите это где-нибудь ещё

Если хочется большего, то есть такая книга:

>   Перечислительная комбинаторика, Стенли



**Задача** (о складываемых перестановках): есть последовательность чисел от 1 до
n, они написаны на бумажках, склееных в ленту. Если эту ленту как-то сложить, то
получится какая-то перестановка, если смотреть на числа "сверху вниз". Такую
перестановку назовём **складываемой**. Как проверить перестановку на
складываемость за $O(n)$?



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
procedure Perm(m: integer);
var i, k: integer;
{P, b - глобальные массивы}
begin
  if m = 1 then 
    print(p)
  else
    for i := 1 to m do begin
      if i < m then begin
        k := p[m];
        p[m] := p[b[m, i]];
        p[b[m,i]] := k;
      end
    end
end;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Если правильно подобрать `b`, то можно генерировать перестановки одной
транспозицией.

$b_1$ может быть произвольной.

$b_2$ может быть произвольной, кроме самой нижней левой клетки. Там стоит 1.
