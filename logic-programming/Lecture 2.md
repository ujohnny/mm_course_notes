Рекурсивно-логическое программирование
======================================



Лекция 2
========



Возведение в степень на РЕФАЛе

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pow { (e1) 0 = 1;
      (e1) 1 = e1;
      (e1) 2 = <*(e1)e1>;
      (e1) e2 = <*(e1)<pow(e1)<-(e2) 1> >>;
    }
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<pow (2) 3> = <*(2)<pow(2) 3>> = <*(2) 4> = 8
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~



А теперь быстрое возведение в степень

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pow1 { (e1) 0 = 1;
       (e1) e2, <mod(e2) 2>:1 = <mul(e1)<pow1(e1)<-(e2) 1>>>;
       (e1) e2, <pow1(e1)<div(e2),2>>:e3 = <mul(e3)e3>;
     }
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Теперь напишем-ка вычисление чисел Фибоначчи

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fib { 0 = 1;
      1 = 1;
      e1 = <+(<fib <sub(e1)1> >) <fib <sub(e1)2> > >
    }
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Экспоненциальненько, ну да ладно

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
gcd { (e1) 0  = e1;
      (e1) e2 = <gcd(e2) <mod(e1) e2>>;
    }
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

А для глобальных переменных есть понятие **Стека**. Его можно использовать для
глобальных переменных.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
         -------------------------+
(c=b=a)(c+b=a)(a=7)(a=2+3)(a=*)   |
         -------------------------+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`<DG с>` - "выкопать" (dig), глубина стека уменьшается

`<CP a>` - копировать (copy), глубина стека не изменяется (по-сути, возвращает
последнее значение соответствующей "переменной")

`<DG ALL>` - весь стек появляется в поле зрения ???

`<BR e = 7+3> `- дописать на стек слева `e = 7+3`

`<RP e = 0>` - присваивание. Последние значение в стеке для `e` заменится на `e
= 0`.
